<div class="container">
  <h1>{{ id ? "Editar produto" : "Novo produto" }}</h1>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div>
      <label>Nome *</label>
      <input formControlName="nome" placeholder="Nome do produto" />
      <div
        class="error"
        *ngIf="nome?.invalid && (nome?.dirty || nome?.touched)"
      >
        <span *ngIf="nome?.errors?.required">Nome é obrigatório.</span>
        <span *ngIf="nome?.errors?.maxlength">Máx. 100 caracteres.</span>
      </div>
    </div>

    <div>
      <label>Descrição</label>
      <textarea
        formControlName="descricao"
        rows="3"
        placeholder="Descrição"
      ></textarea>
      <div
        class="error"
        *ngIf="descricao?.invalid && (descricao?.dirty || descricao?.touched)"
      >
        <span *ngIf="descricao?.errors?.maxlength">Máx. 500 caracteres.</span>
      </div>
    </div>

    <div>
      <label>Fabricante *</label>
      <select formControlName="fabricanteId">
        <option [ngValue]="null">Selecione...</option>
        <option *ngFor="let f of manufacturers" [ngValue]="f.id">
          {{ f.nome }}
        </option>
      </select>
      <div
        class="error"
        *ngIf="
          fabricanteId?.invalid &&
          (fabricanteId?.dirty || fabricanteId?.touched)
        "
      >
        <span *ngIf="fabricanteId?.errors?.required"
          >Fabricante é obrigatório.</span
        >
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="saving">Salvar</button>
      <button type="button" (click)="cancel()">Cancelar</button>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>
  </form>
</div>
